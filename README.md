# Kitten API

> åŸºäº Kitten-Cloud-Function å¼€å‘ - è®©ç¼–ç¨‹çŒ«äº‘åŠŸèƒ½å¾—ä»¥é€šè¿‡ HTTP è°ƒç”¨ï¼Œå¹¶æœ‰å›¾å½¢åŒ–ç®¡ç†åå°ï¼Œè¿˜èƒ½ä½¿å¾—è®©ä½ çš„ç¼–ç¨‹çŒ«Kittenä½œå“æ¥å…¥ AIã€‚

[![License](https://img.shields.io/badge/License-AGPL--3.0-blue.svg)](LICENSE)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆä¸€æ¡å‘½ä»¤éƒ¨ç½²ï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/txcxgzs/kittenapi.git
cd kittenapi

# ä¸€é”®éƒ¨ç½²ï¼ˆå®Œå…¨äº¤äº’å¼ï¼Œä¼šå¼•å¯¼ä½ å®Œæˆæ‰€æœ‰é…ç½®ï¼‰
bash deploy/auto-deploy.sh
```

å°±è¿™ä¹ˆç®€å•ï¼è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… å®‰è£… Node.jsã€PM2ã€Python
- âœ… å®‰è£…é¡¹ç›®ä¾èµ–
- âœ… æ„å»ºå‰åç«¯
- âœ… å¼•å¯¼ä½ é…ç½®æ‰€æœ‰å‚æ•°
- âœ… å¯åŠ¨æœåŠ¡

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

### è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

**Kitten API** æ˜¯åŸºäº [Kitten-Cloud-Function](https://github.com/S-LIGHTNING/Kitten-Cloud-Function) å¼€å‘çš„ HTTP API æœåŠ¡ã€‚

### è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| åŸç‰ˆKitten-Cloud-Functionä¸æä¾›httpè°ƒç”¨æ¥å£ | **HTTP è¯·æ±‚å³å¯è°ƒç”¨** |
| k4 æ— AIåŠŸèƒ½ | **ç®€å•åœ°æ¥å…¥AI** |

### ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½

#### 1ï¸âƒ£ HTTP API æœåŠ¡

å°†ç¼–ç¨‹çŒ«äº‘åŠŸèƒ½å°è£…ä¸º RESTful APIï¼Œä½ å¯ä»¥é€šè¿‡ç®€å•çš„ HTTP è¯·æ±‚æ“ä½œäº‘å˜é‡ã€äº‘åˆ—è¡¨ï¼š

```bash
# è¿æ¥ä½œå“
curl -X POST http://ä½ çš„æœåŠ¡å™¨/api/connect/ä½œå“ID

# è®¾ç½®äº‘å˜é‡
curl -X PUT http://ä½ çš„æœåŠ¡å™¨/api/variable/å˜é‡å -d "å€¼"

# è·å–äº‘å˜é‡
curl http://ä½ çš„æœåŠ¡å™¨/api/variable/å˜é‡å
```

#### 2ï¸âƒ£ AI æ¡¥æ¥æœåŠ¡

è®©ä½ çš„ç¼–ç¨‹çŒ«ä½œå“æ¥å…¥ AIï¼ˆChatGPTã€Claudeã€DeepSeek ç­‰ï¼‰ï¼š

```
ç©å®¶åœ¨ä½œå“ä¸­æé—® â†’ äº‘å˜é‡ â†’ AI æ¡¥æ¥ â†’ AI å›å¤ â†’ äº‘å˜é‡ â†’ ç©å®¶çœ‹åˆ°ç­”æ¡ˆ
```

---

## âš ï¸ é‡è¦å£°æ˜

### ä¾èµ–é¡¹ç›®

æœ¬é¡¹ç›®æ ¸å¿ƒåŠŸèƒ½ä¾èµ– [**Kitten-Cloud-Function**](https://github.com/S-LIGHTNING/Kitten-Cloud-Function) é¡¹ç›®ã€‚

| é¡¹ç›® | ä½œè€… | è®¸å¯è¯ | è¯´æ˜ |
|------|------|--------|------|
| [Kitten-Cloud-Function](https://github.com/S-LIGHTNING/Kitten-Cloud-Function) | [SLIGHTNING](https://github.com/S-LIGHTNING) | AGPL-3.0 | ç¼–ç¨‹çŒ«äº‘åŠŸèƒ½å®¢æˆ·ç«¯åº“ |

> ğŸ’¡ **æç¤º**ï¼šæœ¬é¡¹ç›®å·²å†…ç½® `Kitten-Cloud-Function/` ç›®å½•ï¼Œæ— éœ€é¢å¤–ä¸‹è½½ä¾èµ–é¡¹ç›®ã€‚

**å› æ­¤ï¼Œæœ¬é¡¹ç›®åŒæ ·é‡‡ç”¨ AGPL-3.0 è®¸å¯è¯ã€‚**

---

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### HTTP API æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/connect/:workId` | POST | è¿æ¥åˆ°æŒ‡å®šä½œå“ |
| `/api/disconnect` | POST | æ–­å¼€å½“å‰è¿æ¥ |
| `/api/variable/:name` | GET/PUT | è·å–/è®¾ç½®äº‘å˜é‡ |
| `/api/list/:name` | GET/POST/PUT/DELETE | äº‘åˆ—è¡¨ CRUD æ“ä½œ |
| `/api/online` | GET | è·å–åœ¨çº¿äººæ•° |
| `/api/user/:id` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |

### AI æ¡¥æ¥åŠŸèƒ½

- æ”¯æŒè‡ªå®šä¹‰ AI æç¤ºè¯
- æ”¯æŒå¤šç§ AI æ¨¡å‹
- PM2 ç®¡ç†ï¼Œè‡ªåŠ¨é‡å¯
- æä¾›ç®¡ç†å·¥å…· `ai_bridge_manager.py`

### ç®¡ç†åå°

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—® `http://ä½ çš„æœåŠ¡å™¨IP:ç«¯å£` å³å¯æ‰“å¼€ç®¡ç†åå°ã€‚

#### åå°åŠŸèƒ½

- ğŸ“Š ä»ªè¡¨ç›˜ï¼šè¿æ¥çŠ¶æ€ã€åœ¨çº¿äººæ•°ã€API ç»Ÿè®¡
- ğŸ“ API æ—¥å¿—ï¼šæŸ¥çœ‹æ‰€æœ‰è°ƒç”¨è®°å½•
- ğŸš« IP é»‘åå•ï¼šé˜²æ­¢æ¶æ„è°ƒç”¨
- âš™ï¸ ç³»ç»Ÿè®¾ç½®ï¼šç«¯å£ã€API Keyã€æ—¥å¿—é…ç½®ã€ä¿®æ”¹å¯†ç 

#### åå°ç™»å½•è¯´æ˜

| æƒ…å†µ | æ˜¯å¦éœ€è¦ç™»å½• |
|------|-------------|
| é¦–æ¬¡éƒ¨ç½² | âœ… éœ€è¦è¾“å…¥éƒ¨ç½²æ—¶è®¾ç½®çš„å¯†ç  |
| å·²ç™»å½•çŠ¶æ€ | 24å°æ—¶å†…å…ç™»å½• |

> ğŸ’¡ **å®‰å…¨å»ºè®®**ï¼šå¯†ç å¯åœ¨è®¾ç½®é¡µé¢ä¿®æ”¹ï¼Œå»ºè®®å®šæœŸæ›´æ¢å¯†ç ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
kittenapi/
â”œâ”€â”€ Kitten-Cloud-Function/     # ä¾èµ–é¡¹ç›®ï¼ˆAGPL-3.0ï¼‰
â”œâ”€â”€ server/                    # Node.js åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/                   # TypeScript æºç 
â”‚   â””â”€â”€ .env.example           # é…ç½®æ¨¡æ¿
â”œâ”€â”€ web/                       # Vue 3 å‰ç«¯
â”‚   â””â”€â”€ src/                   # Vue æºç 
â”œâ”€â”€ deploy/                    # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ auto-deploy.sh         # ä¸€é”®éƒ¨ç½²
â”œâ”€â”€ kitten_ai_bridge.py        # AI æ¡¥æ¥ç¨‹åº
â”œâ”€â”€ ai_bridge_manager.py       # AI æ¡¥æ¥ç®¡ç†å·¥å…·
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”œâ”€â”€ LICENSE                    # AGPL-3.0 è®¸å¯è¯
â””â”€â”€ README.md                  # æœ¬æ–‡ä»¶
```

---

## ğŸ”§ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/txcxgzs/kittenapi.git
cd kittenapi

# 2. è¿è¡Œéƒ¨ç½²è„šæœ¬
bash deploy/auto-deploy.sh
```

è„šæœ¬ä¼šå¼•å¯¼ä½ å®Œæˆï¼š
1. ç¯å¢ƒæ£€æµ‹å’Œä¾èµ–å®‰è£…
2. é¡¹ç›®æ„å»º
3. **è®¾ç½®ç®¡ç†åå°å¯†ç **ï¼ˆè‡³å°‘6ä½ï¼‰
4. æœåŠ¡é…ç½®ï¼ˆç«¯å£ã€Cookieã€API Keyï¼‰
5. AI æ¡¥æ¥é…ç½®ï¼ˆå¯é€‰ï¼‰
6. Nginx åå‘ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
7. æœåŠ¡å¯åŠ¨å’ŒéªŒè¯

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. å®‰è£…ä¾èµ–å¹¶æ„å»º
cd server && npm install && npm run build
cd ../web && npm install && npm run build

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp server/.env.example server/.env
nano server/.env  # å¡«å…¥ä½ çš„é…ç½®

# 3. å¯åŠ¨æœåŠ¡
cd server && pm2 start dist/app.js --name kitten-api
```

> âš ï¸ **æ³¨æ„**ï¼šæ‰‹åŠ¨éƒ¨ç½²æ—¶ï¼Œé¦–æ¬¡è®¿é—®ç®¡ç†åå°ä¼šæç¤ºè®¾ç½®å¯†ç ã€‚å»ºè®®ä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬è‡ªåŠ¨å®Œæˆå¯†ç è®¾ç½®ã€‚

---

## âš¡ å¿«æ·å‘½ä»¤è®¾ç½®

éƒ¨ç½²å®Œæˆåï¼Œå»ºè®®åˆ›å»ºå¿«æ·å‘½ä»¤ï¼Œæ–¹ä¾¿æ—¥å¸¸ç®¡ç†ï¼š

### åˆ›å»º `ktai` å¿«æ·å‘½ä»¤

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆå°†è·¯å¾„æ›¿æ¢ä¸ºä½ çš„å®é™…é¡¹ç›®è·¯å¾„ï¼‰
echo 'alias ktai="cd /ä½ çš„é¡¹ç›®è·¯å¾„ && python3 ai_bridge_manager.py"' >> ~/.bashrc
source ~/.bashrc
```

### ä½¿ç”¨å¿«æ·å‘½ä»¤

```bash
# ç›´æ¥è¾“å…¥ ktai å³å¯æ‰“å¼€ AI æ¡¥æ¥ç®¡ç†å™¨
ktai
```

---

## ğŸ› ï¸ AI æ¡¥æ¥ç®¡ç†å™¨

AI æ¡¥æ¥ç®¡ç†å™¨æ˜¯ä¸€ä¸ªäº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç®¡ç† AI æ¡¥æ¥æœåŠ¡ã€‚

### å¯åŠ¨æ–¹å¼

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å¿«æ·å‘½ä»¤ï¼ˆæ¨èï¼‰
ktai

# æ–¹å¼äºŒï¼šå®Œæ•´å‘½ä»¤
cd /ä½ çš„é¡¹ç›®è·¯å¾„
python3 ai_bridge_manager.py
```

### åŠŸèƒ½èœå•

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           AI æ¡¥æ¥ç®¡ç†å·¥å…· v1.2.0                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AI æ¡¥æ¥ç®¡ç†èœå•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
  2. é‡å¯æœåŠ¡
  3. å¯åŠ¨æœåŠ¡
  4. åœæ­¢æœåŠ¡
  5. æŸ¥çœ‹æ—¥å¿—
  6. æŸ¥çœ‹ç»Ÿè®¡
  7. ä¿®æ”¹ä½œå“ID
  8. ä¿®æ”¹ AI é…ç½®
  9. ä¿®æ”¹äº‘å˜é‡é…ç½®
  10. ä¿®æ”¹ AI æç¤ºè¯      â† è‡ªå®šä¹‰ AI çš„è¡Œä¸ºå’Œå›å¤é£æ ¼
  0. é€€å‡º
```

### å¸¸ç”¨åŠŸèƒ½è¯´æ˜

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æŸ¥çœ‹æœåŠ¡çŠ¶æ€ | æŸ¥çœ‹ AI æ¡¥æ¥æ˜¯å¦æ­£å¸¸è¿è¡Œ |
| é‡å¯æœåŠ¡ | é‡å¯ AI æ¡¥æ¥ï¼ˆä¿®æ”¹é…ç½®åéœ€è¦é‡å¯ï¼‰ |
| æŸ¥çœ‹æ—¥å¿— | æŸ¥çœ‹ AI æ¡¥æ¥è¿è¡Œæ—¥å¿— |
| ä¿®æ”¹ AI æç¤ºè¯ | è‡ªå®šä¹‰ AI çš„è¡Œä¸ºã€å›å¤é£æ ¼ç­‰ |

---

## âš™ï¸ é…ç½®è¯´æ˜

### æœåŠ¡é…ç½®ï¼ˆserver/.envï¼‰

éƒ¨ç½²è„šæœ¬ä¼šå¼•å¯¼ä½ è¾“å…¥è¿™äº›å€¼ï¼Œä»¥ä¸‹ä¸ºé…ç½®æ–‡ä»¶æ ¼å¼ï¼š

```env
# æœåŠ¡é…ç½®ï¼ˆéƒ¨ç½²æ—¶è¾“å…¥ï¼‰
PORT=ä½ è®¾ç½®çš„ç«¯å£          # é»˜è®¤å»ºè®®: 9178
HOST=0.0.0.0

# ç®¡ç†åå°å¯†ç ï¼ˆéƒ¨ç½²æ—¶è¾“å…¥ï¼Œè‡³å°‘6ä½ï¼‰
ADMIN_PASSWORD=ä½ è®¾ç½®çš„å¯†ç 

# ç¼–ç¨‹çŒ«èº«ä»½è®¤è¯ï¼ˆéƒ¨ç½²æ—¶è¾“å…¥ï¼‰
CODEMAO_AUTHORIZATION=ä½ çš„authorizationå€¼

# API å¯†é’¥ï¼ˆéƒ¨ç½²æ—¶è¾“å…¥ï¼Œå¯é€‰ï¼‰
API_KEY=ä½ è®¾ç½®çš„APIå¯†é’¥

# æ—¥å¿—ä¿ç•™å¤©æ•°ï¼ˆéƒ¨ç½²æ—¶è¾“å…¥ï¼‰
LOG_RETENTION_DAYS=ä½ è®¾ç½®çš„å¤©æ•°
```

> ğŸ’¡ **æç¤º**ï¼šé»˜è®¤ç«¯å£å»ºè®®ä½¿ç”¨ `9178`ï¼Œéƒ¨ç½²è„šæœ¬ä¼šå¼•å¯¼ä½ è¾“å…¥è¿™äº›å€¼ã€‚

### AI æ¡¥æ¥é…ç½®

éƒ¨ç½²æ—¶ä¼šè‡ªåŠ¨åˆ›å»º `ai-bridge/config.py`ï¼Œé…ç½®å†…å®¹æ ¹æ®ä½ éƒ¨ç½²æ—¶çš„è¾“å…¥ç”Ÿæˆï¼š

```python
CONFIG = {
    "api_base_url": "éƒ¨ç½²æ—¶é…ç½®çš„APIåœ°å€",
    "ai_api_url": "éƒ¨ç½²æ—¶é…ç½®çš„AI APIåœ°å€",
    "ai_api_key": "éƒ¨ç½²æ—¶é…ç½®çš„AI API Key",
    "ai_model": "éƒ¨ç½²æ—¶é…ç½®çš„AIæ¨¡å‹",
    "variable_name": "éƒ¨ç½²æ—¶é…ç½®çš„äº‘å˜é‡å",
    "question_prefix": "éƒ¨ç½²æ—¶é…ç½®çš„é—®é¢˜å‰ç¼€",
    "answer_prefix": "éƒ¨ç½²æ—¶é…ç½®çš„ç­”æ¡ˆå‰ç¼€"
}
```

> ğŸ’¡ **æç¤º**ï¼šéƒ¨ç½²è„šæœ¬ä¼šå¼•å¯¼ä½ è¾“å…¥è¿™äº›å€¼ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚

---

## ğŸ“– å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs kitten-cloud-api

# é‡å¯æœåŠ¡
pm2 restart kitten-cloud-api

# åœæ­¢æœåŠ¡
pm2 stop kitten-cloud-api

# AI æ¡¥æ¥ç®¡ç†å·¥å…·ï¼ˆæ¨èä½¿ç”¨ ktai å¿«æ·å‘½ä»¤ï¼‰
ktai
```

---

## ğŸ“– æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [API æ–‡æ¡£](docs/API.md) | å®Œæ•´ API æ¥å£è¯´æ˜ |

---


## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **AGPL-3.0 è®¸å¯è¯**ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- **[SLIGHTNING](https://github.com/S-LIGHTNING)** - [Kitten-Cloud-Function](https://github.com/S-LIGHTNING/Kitten-Cloud-Function) é¡¹ç›®ä½œè€…

